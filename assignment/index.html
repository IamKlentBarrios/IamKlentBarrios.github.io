<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!--
    CT Culminating Project
    Student: Sean Lee
    Project: Interactive Sports Career Simulator

    Notes:
    - Started with a basic season loop
    - Added injuries and trophies later
    - Focused on probability and conditionals
    - UI was improved after logic worked
  -->

  <title>Sports Career Simulator</title>

  <style>
    /* --- basic colour variables --- */
    :root{
      --bg:#0b1220;
      --card:#0f1a31;
      --text:#e9eefc;
      --muted:#a9b6d6;
      --accent:#38bdf8;
      --good:#22c55e;
      --warn:#f59e0b;
      --bad:#ef4444;
      --line:rgba(255,255,255,.12);
      --radius:18px;
    }

    *{ box-sizing:border-box }

    body{
      margin:0;
      font-family: Arial, Helvetica, sans-serif;
      background:#0b1220;
      color:var(--text);
      padding:24px;
    }

    h1{ margin:0 0 6px 0; }

    .container{
      max-width:1050px;
      margin:auto;
    }

    .grid{
      display:grid;
      grid-template-columns:380px 1fr;
      gap:16px;
    }

    @media(max-width:900px){
      .grid{ grid-template-columns:1fr; }
    }

    .card{
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:16px;
      background:#0f1a31;
    }

    label{
      display:block;
      font-size:12px;
      color:var(--muted);
      margin-top:12px;
    }

    input, select{
      width:100%;
      padding:10px;
      margin-top:4px;
      border-radius:10px;
      border:1px solid var(--line);
      background:#0b1220;
      color:var(--text);
    }

    input[type="range"]{
      accent-color:var(--accent);
    }

    button{
      margin-top:12px;
      padding:10px 14px;
      border:none;
      border-radius:12px;
      background:#38bdf8;
      cursor:pointer;
      font-weight:bold;
    }

    button.secondary{
      background:#1e293b;
      color:white;
    }

    button.danger{
      background:#ef4444;
      color:white;
    }

    table{
      width:100%;
      border-collapse:collapse;
      margin-top:12px;
      font-size:13px;
    }

    th, td{
      border-bottom:1px solid var(--line);
      padding:8px;
    }

    th{ color:var(--muted); }

    .badge{
      padding:3px 8px;
      border-radius:12px;
      font-size:12px;
    }

    .good{ background:#14532d; }
    .warn{ background:#78350f; }
    .bad{ background:#7f1d1d; }

    .error{
      display:none;
      margin-top:10px;
      color:#fecaca;
      font-size:13px;
    }
  </style>
</head>

<body>
<div class="container">
  <h1>Sports Career Simulator</h1>
  <p style="color:#a9b6d6;font-size:14px;">
    This program simulates an athlete's career using random probability,
    conditionals, loops, and user input.
  </p>

  <div class="grid">

    <!-- INPUT SIDE -->
    <div class="card">
      <h3>Athlete Setup</h3>

      <label>Name</label>
      <input id="name" placeholder="Sean Lee">

      <label>Starting Age</label>
      <input id="age" type="number" value="18">

      <label>Sport</label>
      <select id="sport">
        <option>Soccer</option>
        <option>Basketball</option>
        <option>Tennis</option>
        <option>Hockey</option>
      </select>

      <label>Talent (1–10)</label>
      <input id="talent" type="range" min="1" max="10" value="6">

      <label>Training (1–10)</label>
      <input id="training" type="range" min="1" max="10" value="7">

      <label>Injury Risk (1–10)</label>
      <input id="risk" type="range" min="1" max="10" value="4">

      <button onclick="runSim()">Simulate Career</button>
      <button class="secondary" onclick="resetSim()">Reset</button>

      <div id="error" class="error"></div>
    </div>

    <!-- OUTPUT SIDE -->
    <div class="card">
      <h3>Results</h3>

      <p><b>Career Tier:</b> <span id="tier">—</span></p>
      <p><b>Seasons Played:</b> <span id="seasons">—</span></p>
      <p><b>Trophies:</b> <span id="trophies">—</span></p>

      <table id="logTable" style="display:none;">
        <thead>
          <tr>
            <th>Season</th>
            <th>Age</th>
            <th>Performance</th>
            <th>Event</th>
          </tr>
        </thead>
        <tbody id="log"></tbody>
      </table>
    </div>

  </div>
</div>

<script>
/*
  Core idea:
  - Loop through seasons
  - Calculate performance
  - Random injury chance
  - Stop when retired
*/

function runSim(){
  document.getElementById("error").style.display="none";

  let age = parseInt(document.getElementById("age").value);
  let talent = parseInt(document.getElementById("talent").value);
  let training = parseInt(document.getElementById("training").value);
  let risk = parseInt(document.getElementById("risk").value);

  if(age < 12 || age > 45){
    showError("Age must be between 12 and 45");
    return;
  }

  let seasons = 0;
  let trophies = 0;
  let injuries = 0;

  const log = document.getElementById("log");
  log.innerHTML = "";

  while(age < 38 && injuries < 3){
    seasons++;

    let performance =
      talent * 1.2 +
      training * 0.5 +
      (Math.random()*4 - 2);

    let injuryChance = 0.05 + risk*0.03;
    let injured = Math.random() < injuryChance;

    let event = "Normal";

    if(injured){
      injuries++;
      performance *= 0.6;
      event = "Injury";
    }

    if(Math.random() < performance/25){
      trophies++;
      event += " + Trophy";
    }

    log.innerHTML += `
      <tr>
        <td>${seasons}</td>
        <td>${age}</td>
        <td>${performance.toFixed(1)}</td>
        <td>${event}</td>
      </tr>
    `;

    age++;
  }

  document.getElementById("tier").innerText =
    trophies >= 4 ? "Star" :
    trophies >= 2 ? "Professional" :
    "Developing";

  document.getElementById("seasons").innerText = seasons;
  document.getElementById("trophies").innerText = trophies;
  document.getElementById("logTable").style.display="table";
}

function resetSim(){
  document.getElementById("tier").innerText="—";
  document.getElementById("seasons").innerText="—";
  document.getElementById("trophies").innerText="—";
  document.getElementById("logTable").style.display="none";
}

function showError(msg){
  let e = document.getElementById("error");
  e.innerText = msg;
  e.style.display="block";
}
</script>
</body>
</html>
