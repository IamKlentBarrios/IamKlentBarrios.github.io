<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Athlete Database</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; background:#f8f9fa; }
    h2 { background:#007bff; color:white; padding:8px; border-radius:6px; }
    label { display:inline-block; width:130px; font-weight:bold; }
    input, select, button { margin:5px;}
    #outputTable, th, td {
        border: 1px solid black;
        border-collapse: collapse;
        padding: 5px;
    }
    #quickButtons button {
        margin: 3px;
        background:#343a40;
        color:white;
        border-radius:4px;
        border:none;
        padding:6px 10px;
        cursor:pointer;
    }
    #quickButtons button:hover { background:#495057 }
</style>
</head>
<body>

<h1>Athlete SQL Database</h1>

<h2>Manual Entry</h2>
<label>ID:</label><input type="number" id="ID"><br>
<label>Name:</label><input type="text" id="Name"><br>
<label>Sport:</label><input type="text" id="Sport"><br>
<label>Country:</label><input type="text" id="Country"><br>
<label>Age:</label><input type="number" id="Age"><br>
<label>Gender:</label>
<select id="Gender">
    <option value="Male">Male</option>
    <option value="Female">Female</option>
</select><br>
<label>Team/Club:</label><input type="text" id="Team"><br>
<button onclick="addStudent()">+ Add Athlete</button>

<h2>CSV Import</h2>
<input type="file" id="csvFile"><br>
<button onclick="importCSV()">Import CSV</button>
<button onclick="clearAll()">Clear All</button>

<hr>

<h2>Run SQL Query</h2>
<textarea id="sqlInput" rows="3" cols="50">SELECT * FROM athletes;</textarea><br>
<button onclick="runQuery()">Run SQL</button>

<div id="quickButtons">
<button onclick="quick('SELECT * FROM athletes;')">All Data</button>
<button onclick="quick(`SELECT * FROM athletes WHERE Country='South Korea';`)">ðŸ‡°ðŸ‡· Korean Players</button>
<button onclick="quick(`SELECT Name,Age FROM athletes WHERE Age<=25 ORDER BY Age;`)">Young Athletes</button>
<button onclick="quick(`SELECT Sport,COUNT(*) FROM athletes GROUP BY Sport;`)">Sport Counts</button>
<button onclick="quick(`SELECT * FROM athletes ORDER BY Age DESC LIMIT 5;`)">Oldest 5</button>
</div>

<br><br>

<table id="outputTable"></table>

<script src="https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/sql-wasm.js"></script>
<script>

let db;
initDB();

async function initDB() {
    const SQL = await initSqlJs({ locateFile: file => `https://cdnjs.cloudflare.com/ajax/libs/sql.js/1.6.2/${file}` });
    db = new SQL.Database();
    db.run(`CREATE TABLE athletes (
        ID INTEGER, Name TEXT, Sport TEXT, Country TEXT,
        Age INTEGER, Gender TEXT, Team TEXT
    );`);
}

function quick(sql) {
    document.getElementById("sqlInput").value = sql;
    runQuery();
}

function runQuery() {
    const sql = document.getElementById("sqlInput").value;
    const result = db.exec(sql);
    displayResult(result);
}

function displayResult(result) {
    const table = document.getElementById("outputTable");
    table.innerHTML = "";
    if (!result.length) return;
    const cols = result[0].columns;
    const rows = result[0].values;
    let headerRow = "<tr>";
    cols.forEach(c => headerRow += `<th>${c}</th>`);
    headerRow += "</tr>";
    table.innerHTML += headerRow;
    rows.forEach(row => {
        let tr = "<tr>";
        row.forEach(col => tr += `<td>${col}</td>`);
        tr += "</tr>";
        table.innerHTML += tr;
    });
}

function addStudent() {
    const fields = ["ID","Name","Sport","Country","Age","Gender","Team"];
    let vals = fields.map(id => document.getElementById(id).value);
    db.run(`INSERT INTO athletes VALUES (?,?,?,?,?,?,?)`, vals);
    runQuery();
}

function clearAll() {
    db.run("DELETE FROM athletes;");
    runQuery();
}

function importCSV() {
    const file = document.getElementById("csvFile").files[0];
    if (!file) return alert("Select a CSV file first!");
    const reader = new FileReader();
    reader.onload = () => {
        const lines = reader.result.split("\n").slice(1);
        lines.forEach(line => {
            const [ID,Name,Sport,Country,Age,Gender,Team] = line.split(",");
            if(ID) db.run(`INSERT INTO athletes VALUES (?,?,?,?,?,?,?)`, 
                [ID,Name,Sport,Country,Age,Gender,Team]);
        });
        runQuery();
    };
    reader.readAsText(file);
}

</script>

</body>
</html>
